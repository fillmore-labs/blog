<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js data-theme-init><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=color-scheme content="light dark"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#000000"><style>html{background:Canvas;color:CanvasText}@media(prefers-color-scheme:dark){html{background:#0b0d12;color:#e6e6e6}}html[data-theme-init] *{transition:none!important}</style><script>(function(){const t="td-color-theme",n=localStorage.getItem(t);let e=n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e)})()</script><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Minimize Identifier Scope in Go | Fillmore Labs Blog</title><meta name=description content><meta property="og:url" content="https://blog.fillmore-labs.com/posts/scope-1/"><meta property="og:site_name" content="Fillmore Labs Blog"><meta property="og:title" content="Minimize Identifier Scope in Go"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-19T12:00:00+02:00"><meta property="article:modified_time" content="2025-11-19T12:00:00+02:00"><meta property="article:tag" content="Go"><meta property="og:see_also" content="https://blog.fillmore-labs.com/posts/scope-3/"><meta property="og:see_also" content="https://blog.fillmore-labs.com/posts/scope-2/"><meta itemprop=name content="Minimize Identifier Scope in Go"><meta itemprop=datePublished content="2025-11-19T12:00:00+02:00"><meta itemprop=dateModified content="2025-11-19T12:00:00+02:00"><meta itemprop=wordCount content="1594"><meta itemprop=keywords content="Go"><meta name=twitter:card content="summary"><meta name=twitter:title content="Minimize Identifier Scope in Go"><link rel=preload href=/scss/main.min.1c9e9bb50bb278b13c72eba67743fcf3d2f44ce6efc4e49dfb4e22143475ee5d.css as=style integrity="sha256-HJ6btQuyeLE8cuumd0P889L0TObvxOSd+04iFDR17l0=" crossorigin=anonymous><link href=/scss/main.min.1c9e9bb50bb278b13c72eba67743fcf3d2f44ce6efc4e49dfb4e22143475ee5d.css rel=stylesheet integrity="sha256-HJ6btQuyeLE8cuumd0P889L0TObvxOSd+04iFDR17l0=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class="td-page td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Fillmore Labs Blog</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/posts/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/tags/><span>Tags</span></a></li><li class=nav-item><a class=nav-link href=/about/><span>About</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/fillmore-labs/ target=_blank rel=noopener><i class='fa-brands fa-github'></i><span>GitHub</span></a></li><li class=nav-item><a class=nav-link href=/><span></span></a></li><li class="nav-item td-navbar__light-dark-menu"><div class="td-light-dark-menu dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class=dropdown-menu aria-labelledby=bd-theme><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></div></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-posts-li><a href=/posts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-posts><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsscope-3-li><a href=/posts/scope-3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsscope-3><span>Nested Assignments</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsscope-2-li><a href=/posts/scope-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsscope-2><span>Shadowing in Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-postsscope-1-li><a href=/posts/scope-1/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-postsscope-1><span class=td-sidebar-nav-active-item>Minimize Identifier Scope in Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postserrors-2-li><a href=/posts/errors-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postserrors-2><span>The Day the Linter Broke My Code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postserrors-1-li><a href=/posts/errors-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postserrors-1><span>Understanding Go Error Types: Pointer vs. Value</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postszerosized-2-li><a href=/posts/zerosized-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postszerosized-2><span>A Zero-Sized Bug Hunt in golang.org/x/sync</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postszerosized-1-li><a href=/posts/zerosized-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postszerosized-1><span>The Perils of Pointers in the Land of the Zero-Sized Type</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsconcurrency-bugs-2-li><a href=/posts/concurrency-bugs-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsconcurrency-bugs-2><span>More Concurrency Bugs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsconcurrency-bugs-1-li><a href=/posts/concurrency-bugs-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsconcurrency-bugs-1><span>Concurrency Bugs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsjavavirtualthreads-2-li><a href=/posts/javavirtualthreads-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsjavavirtualthreads-2><span>Java Structured Concurrency</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsjavavirtualthreads-1-li><a href=/posts/javavirtualthreads-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsjavavirtualthreads-1><span>Java Virtual Threads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsstructured-5-li><a href=/posts/structured-5/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsstructured-5><span>How to Write Concurrent Go Code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsstructured-4-li><a href=/posts/structured-4/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsstructured-4><span>Existing Libraries</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsstructured-3-li><a href=/posts/structured-3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsstructured-3><span>Comparison to Our Original Approach</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsstructured-2-li><a href=/posts/structured-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsstructured-2><span>An Alternative Approach</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsstructured-1-li><a href=/posts/structured-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsstructured-1><span>Structured Concurrency</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsgoroutines-4-li><a href=/posts/goroutines-4/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsgoroutines-4><span>Resource Leaks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsgoroutines-3-li><a href=/posts/goroutines-3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsgoroutines-3><span>Avoiding Unnecessary Work</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsgoroutines-2-li><a href=/posts/goroutines-2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsgoroutines-2><span>Using Goroutines Will Not Grant You Another CPU Core</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-postsgoroutines-1-li><a href=/posts/goroutines-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-postsgoroutines-1><span>Goroutines Are Cheap, but Not Free</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#scopes-in-go>Scopes in Go</a></li><li><a href=#the-case-for-minimal-scope>The Case for Minimal Scope</a><ul><li><a href=#reduced-cognitive-load>Reduced Cognitive Load</a></li><li><a href=#better-refactoring>Better Refactoring</a></li></ul></li><li><a href=#idiomatic-go-patterns>Idiomatic Go Patterns</a><ul><li><a href=#if-with-initializer><code>if</code> with Initializer</a></li><li><a href=#what-about-var>What About <code>var</code>?</a></li></ul></li><li><a href=#when-wider-scope-makes-sense>When Wider Scope Makes Sense</a><ul><li><a href=#reducing-nesting-takes-priority>Reducing Nesting Takes Priority</a></li><li><a href=#accidental-shadowing>Accidental Shadowing</a></li></ul></li><li><a href=#introducing-scopeguard>Introducing <code>scopeguard</code></a><ul><li><a href=#review-automatic-fixes>Review Automatic Fixes</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/architecture/ data-taxonomy-term=architecture><span class=taxonomy-label>Architecture</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/concurrency/ data-taxonomy-term=concurrency><span class=taxonomy-label>Concurrency</span><span class=taxonomy-count>13</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/errors/ data-taxonomy-term=errors><span class=taxonomy-label>Errors</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/linter/ data-taxonomy-term=linter><span class=taxonomy-label>Linter</span><span class=taxonomy-count>7</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/scope/ data-taxonomy-term=scope><span class=taxonomy-label>Scope</span><span class=taxonomy-count>3</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-series"><h5 class=taxonomy-title>Series</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/go-concurrency/ data-taxonomy-term=go-concurrency><span class=taxonomy-label>Go Concurrency</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/go-errors/ data-taxonomy-term=go-errors><span class=taxonomy-label>Go Errors</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/go-scope/ data-taxonomy-term=go-scope><span class=taxonomy-label>Go Scope</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/structured-concurrency/ data-taxonomy-term=structured-concurrency><span class=taxonomy-label>Structured Concurrency</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/zero-sized-types/ data-taxonomy-term=zero-sized-types><span class=taxonomy-label>Zero-Sized Types</span><span class=taxonomy-count>2</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tags</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/go/ data-taxonomy-term=go><span class=taxonomy-label>Go</span><span class=taxonomy-count>18</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/goroutines/ data-taxonomy-term=goroutines><span class=taxonomy-label>Goroutines</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/java/ data-taxonomy-term=java><span class=taxonomy-label>Java</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/jvm/ data-taxonomy-term=jvm><span class=taxonomy-label>Jvm</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/virtual-threads/ data-taxonomy-term=virtual-threads><span class=taxonomy-label>Virtual-Threads</span><span class=taxonomy-count>2</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><a class=td-rss-button title=RSS href=/posts/index.xml target=_blank rel=noopener><i class="fa-solid fa-rss" aria-hidden=true></i></a><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/posts/>Blog</a></li><li class="breadcrumb-item active" aria-current=page>Minimize Identifier Scope in Go</li></ol></nav><div class=td-content><h1>Minimize Identifier Scope in Go</h1><div class="td-byline mb-4"><time datetime=2025-11-19 class=text-body-secondary>Wednesday, November 19, 2025</time></div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-categories"><h5 class=taxonomy-title>Categories:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/scope/ data-taxonomy-term=scope><span class=taxonomy-label>Scope</span></a></li><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/categories/linter/ data-taxonomy-term=linter><span class=taxonomy-label>Linter</span></a></li></ul></div><div class="taxonomy taxonomy-terms-article taxo-series"><h5 class=taxonomy-title>Series:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/series/go-scope/ data-taxonomy-term=go-scope><span class=taxonomy-label>Go Scope</span></a></li></ul></div><div class="taxonomy taxonomy-terms-article taxo-tags"><h5 class=taxonomy-title>Tags:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.fillmore-labs.com/tags/go/ data-taxonomy-term=go><span class=taxonomy-label>Go</span></a></li></ul></div></header><p>Have you ever spent hours debugging a subtle issue, only to discover it was caused by a variable being accidentally
reused 200 lines away from its declaration? Or found yourself scrolling up and down a long function, trying to track
where a variable was last modified?</p><p>These frustrations often stem from overly wide identifier scopes. Narrow identifier scoping isn&rsquo;t just a style
preference in Go; its robust support for narrow scoping is one of its most powerful features for readability and
maintainability.</p><h2 id=scopes-in-go>Scopes in Go<a class=td-heading-self-link href=#scopes-in-go aria-label="Heading self-link"></a></h2><p>Let&rsquo;s start with a little technical background.</p><p>Go has the concept of identifiers which <strong>name</strong> program entities such as variables and functions.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> Variables are
<strong>storage locations</strong> for holding a value.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><p>A <strong>declaration</strong> binds an identifier to a variable.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> The scope of a declared identifier is the extent of source text
in which the identifier denotes the specified variable.</p><p>So you could say that declaring an identifier gives a memory location a name, and this name is valid in a certain range
in the source code.</p><h2 id=the-case-for-minimal-scope>The Case for Minimal Scope<a class=td-heading-self-link href=#the-case-for-minimal-scope aria-label="Heading self-link"></a></h2><p>When reading or writing code, developers maintain a mental “symbol table” of active identifiers. Since identifier names
are lexically scoped, keeping the scope small reduces the mental burden on the reader.</p><p>Two of the core philosophies of Go are simplicity and readability. Minimizing the scope of identifiers is highly
idiomatic in Go. It is explicitly encouraged by the language design, particularly through features like short variable
declarations within control structures, and is considered a best practice across all major Go style guides.</p><h3 id=reduced-cognitive-load>Reduced Cognitive Load<a class=td-heading-self-link href=#reduced-cognitive-load aria-label="Heading self-link"></a></h3><p>If a variable is declared at the top of a long function but used at the bottom, the reader must remember its state
through the entire function.</p><p>Consider this function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span><span class=w> </span><span class=nf>processUserData</span><span class=p>(</span><span class=nx>userID</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=kt>error</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=o>*</span><span class=nx>UserData</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>count</span><span class=w> </span><span class=kt>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>lastError</span><span class=w> </span><span class=kt>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ... 50 lines of code ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>result</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nf>fetchFromDB</span><span class=p>(</span><span class=nx>userID</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ... 30 more lines ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>  </span><span class=c1>// Wait, what was result again?</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nx>count</span><span class=o>++</span><span class=w>  </span><span class=c1>// Is this the right count variable?</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ... more code ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>In this wide-scope pattern, readers must track three variables across potentially 100+ lines of code. Each variable
could be modified anywhere, making the code difficult to understand and refactor.</p><p>If a variable is declared immediately before use and drops out of scope immediately after, the reader can forget about
it once that block ends.</p><p>This allows for shorter, punchier variable names. In a 5-line block, <code>i</code> is perfectly readable. In a 500-line function,
<code>i</code> is a liability.</p><p>Go Code Review Comments writes:</p><blockquote><p>Variable names in Go should be short rather than long. This is especially true for local variables with limited scope.
Prefer <code>c</code> to <code>lineCount</code>. Prefer <code>i</code> to <code>sliceIndex</code>.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p></blockquote><p>The Google Go Style Guide recommends that the length of a name should be proportional to the size of its scope:<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></p><ul><li>Small scope (1-7 lines): Single letter or short names acceptable</li><li>Medium scope (8-15 lines): 3-5 character names</li><li>Large scope (15-25 lines): Descriptive names</li><li>Package scope: Fully descriptive names</li></ul><p>Dave Cheney argues that concise variable names are more readable in a tight scope, leading to more comprehensible
code.<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup></p><h3 id=better-refactoring>Better Refactoring<a class=td-heading-self-link href=#better-refactoring aria-label="Heading self-link"></a></h3><p>Tightly scoped variables decouple logic. If you decide to extract a block of logic into a new function, you don&rsquo;t have
to untangle dependencies on variables declared high up in the parent function.<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup></p><p>Consider this “wide scope” example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Wide scope - harder to extract</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>validateUser</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;invalid user: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// Extracting code here requires redeclaring `err`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nx>err</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nf>processUser</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;user processing failed: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Versus the “tight scope” equivalent:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Tightly scoped - easy to extract</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>validateUser</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;invalid user: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>processUser</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;user processing failed: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=idiomatic-go-patterns>Idiomatic Go Patterns<a class=td-heading-self-link href=#idiomatic-go-patterns aria-label="Heading self-link"></a></h2><p>Go&rsquo;s syntax explicitly encourages a narrow scope. The language doesn&rsquo;t just have <code>if</code> statements; it has short variable
declarations and <code>if</code> statements <strong>with initializers</strong>.</p><p>Google Go Style Guide mentions:</p><blockquote><p>These are designed to work cohesively with core language features like composite literal and <strong>if-with-initializer</strong>
syntax to enable test authors to write [clear, readable, and maintainable tests].<sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup></p></blockquote><h3 id=if-with-initializer><code>if</code> with Initializer<a class=td-heading-self-link href=#if-with-initializer aria-label="Heading self-link"></a></h3><p>Perhaps the most distinctively idiomatic pattern in Go. You can execute a statement (usually a short variable
declaration) just before the condition.</p><p><strong>Non-Idiomatic (Bad):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>os</span><span class=p>.</span><span class=nf>WriteFile</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=mo>0644</span><span class=p>)</span><span class=w>  </span><span class=c1>// &#39;err&#39; leaks into the rest of the function</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// &#39;err&#39; still in scope, potentially holding stale value</span><span class=w>
</span></span></span></code></pre></div><p><strong>Idiomatic (Good):</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>os</span><span class=p>.</span><span class=nf>WriteFile</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=mo>0644</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// &#39;err&#39; exists only inside this block</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// &#39;err&#39; is out of scope here.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// We can declare a new &#39;err&#39; later without conflict.</span><span class=w>
</span></span></span></code></pre></div><p>This style is recommended by the Uber Go Style Guide to reduce the scope of variables.<sup id=fnref:9><a href=#fn:9 class=footnote-ref role=doc-noteref>9</a></sup></p><p>Effective Go states:</p><blockquote><p>Since <code>if</code> and <code>switch</code> accept an initialization statement, it&rsquo;s common to see one used to set up a local
variable.<sup id=fnref:10><a href=#fn:10 class=footnote-ref role=doc-noteref>10</a></sup></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>file</span><span class=p>.</span><span class=nf>Chmod</span><span class=p>(</span><span class=mo>0664</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>log</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>err</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></div></blockquote><p>This pattern, ubiquitous in Go code, ensures <code>err</code> exists <em>only</em> where it matters. The same applies to <code>switch</code>
statements and <code>for</code> loops.</p><h3 id=what-about-var>What About <code>var</code>?<a class=td-heading-self-link href=#what-about-var aria-label="Heading self-link"></a></h3><p>If you have a <code>var</code> declaration, you can still minimize its scope by moving it into the nearest enclosing block.</p><h2 id=when-wider-scope-makes-sense>When Wider Scope Makes Sense<a class=td-heading-self-link href=#when-wider-scope-makes-sense aria-label="Heading self-link"></a></h2><p>While narrowing scope is generally virtuous, it is not a dogma. There are legitimate patterns where slightly wider scope
improves readability.</p><h3 id=reducing-nesting-takes-priority>Reducing Nesting Takes Priority<a class=td-heading-self-link href=#reducing-nesting-takes-priority aria-label="Heading self-link"></a></h3><p>One of the primary goals of Go is readability. Sometimes, mathematically minimal scope comes at the cost of excessive
nesting.</p><p>While reducing scope is important, reducing nesting has higher priority.<sup id=fnref:11><a href=#fn:11 class=footnote-ref role=doc-noteref>11</a></sup> Early returns that reduce nesting improve
readability more than artificially narrow scopes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// This is fine - sequential operations with error reuse</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>func</span><span class=w> </span><span class=nf>fetchAndProcess</span><span class=p>(</span><span class=nx>client</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>Client</span><span class=p>,</span><span class=w> </span><span class=nx>url</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=kt>error</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>resp</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>client</span><span class=p>.</span><span class=nf>Get</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;fetch failed: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>defer</span><span class=w> </span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>body</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>io</span><span class=p>.</span><span class=nf>ReadAll</span><span class=p>(</span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>)</span><span class=w> </span><span class=c1>// Reusing err is idiomatic here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;read failed: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=kd>var</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=kt>any</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>(</span><span class=nx>body</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=nx>result</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// Shadowing err is also fine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;parse failed: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nf>process</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>return</span><span class=w> </span><span class=kc>nil</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=accidental-shadowing>Accidental Shadowing<a class=td-heading-self-link href=#accidental-shadowing aria-label="Heading self-link"></a></h3><p>While minimizing scope is advantageous, it introduces the risk of accidental shadowing. This happens when you use <code>:=</code>
inside a block intending to update a variable from the outer scope, but you accidentally create a new variable with the
same name.</p><p>Temporal had a bug like this in 2021 - although one could argue it was caused by the overly broad scope of <code>err</code>.<sup id=fnref:12><a href=#fn:12 class=footnote-ref role=doc-noteref>12</a></sup></p><p><strong>The Bug:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=kt>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>condition</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>result</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>compute</span><span class=p>()</span><span class=w>  </span><span class=c1>// Creates NEW &#39;result&#39; scoped to this block!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span><span class=w>  </span><span class=c1>// Prints computed value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span><span class=w>  </span><span class=c1>// Prints &#34;&#34; (outer &#39;result&#39; was never touched)</span><span class=w>
</span></span></span></code></pre></div><p><strong>The Fix:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=kt>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>if</span><span class=w> </span><span class=nx>condition</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nx>result</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nf>compute</span><span class=p>()</span><span class=w>  </span><span class=c1>// Uses assignment &#39;=&#39;, not declaration &#39;:=&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span><span class=w>  </span><span class=c1>// Prints computed value</span><span class=w>
</span></span></span></code></pre></div><p><strong>Warning:</strong> Be careful with <code>:=</code> inside nested blocks if you need the value to persist after the block closes. This is
where tools like <code>go run golang.org/x/tools/go/analysis/passes/shadow/cmd/shadow ./...</code> can help catch these mistakes.</p><h2 id=introducing-scopeguard>Introducing <code>scopeguard</code><a class=td-heading-self-link href=#introducing-scopeguard aria-label="Heading self-link"></a></h2><p>Despite our best intentions, code evolves and scopes drift. A variable starts inside an <code>if</code> block, then gets pulled out
during a refactor, and stays there even after the code changes again.</p><p>Existing linters like <code>shadow</code> and <code>ineffassign</code> are excellent for catching bugs, but they don&rsquo;t necessarily optimize
for scope structure.</p><p>What&rsquo;s missing is a tool that analyzes your code to find the smallest possible scope for each variable declaration.</p><p>Enter <strong><a href=https://github.com/fillmore-labs/scopeguard><code>scopeguard</code></a></strong>.</p><p><code>scopeguard</code> is a new static analysis tool designed to identify declarations that can be moved into a tighter scope. It
specifically looks for opportunities to:</p><ol><li>Move variables into <code>if</code>, <code>switch</code>, and <code>for</code> initializers.</li><li>Push variables down into the blocks where they are actually used.</li></ol><h3 id=review-automatic-fixes>Review Automatic Fixes<a class=td-heading-self-link href=#review-automatic-fixes aria-label="Heading self-link"></a></h3><p><code>scopeguard</code> provides automatic fixes, which can be a massive time-saver. However, moving variable declarations changes
the <em>order of execution</em> relative to surrounding code.</p><p>While the linter attempts to ensure safety, moving a function call that has side effects (or relies on global state)
into a different block can alter program behavior. <strong>Always review the changes suggested by automatic fixers.</strong> Do not
blindly apply them to your entire codebase without running your test suite.</p><h2 id=summary>Summary<a class=td-heading-self-link href=#summary aria-label="Heading self-link"></a></h2><p>Minimizing variable scope is a habit that pays dividends in maintenance, refactoring, and cognitive ease. By leveraging
Go&rsquo;s built-in idioms and tools like <code>scopeguard</code>, you can keep your codebase clean, readable, and robust.</p><p>The Go team designed the language with narrow scoping in mind — from short variable declarations to init statements in
control structures. By following these patterns, you&rsquo;re not just following a style guide; you&rsquo;re writing Go the way it
was meant to be written.</p><p>Give <a href=https://github.com/fillmore-labs/scopeguard><code>scopeguard</code></a> a try on your project and see how many variables are
overstaying their welcome.</p><hr><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Go Language Specification, “<a href=https://go.dev/ref/spec#Identifiers>Identifiers</a>”&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Go Language Specification, “<a href=https://go.dev/ref/spec#Variables>Variables</a>”&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Go Language Specification, “<a href=https://go.dev/ref/spec#Declarations_and_scope>Declarations and Scope</a>”&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>Go Code Review Comments, “<a href=https://go.dev/wiki/CodeReviewComments#variable-names>Variable Names</a>”&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>Google Go Style Guide, “<a href=https://google.github.io/styleguide/go/decisions#variable-names>Variable Names</a>”&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>Dave Cheney,
“<a href=https://dave.cheney.net/practical-go/presentations/gophercon-singapore-2019.html#_context_is_key>Context is key</a>”,
Practical Go - GopherCon Singapore (2019)&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>Dave Cheney,
“<a href=https://dave.cheney.net/practical-go/presentations/gophercon-israel.html#_use_the_smallest_scope_possible>Use the smallest scope possible</a>”,
Workshop Practical Go - GopherCon Israel (2020)&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:8><p>Google Go Style Guide,
“<a href=https://google.github.io/styleguide/go/decisions#use-package-testing>Use package <code>testing</code></a>”&#160;<a href=#fnref:8 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:9><p>Uber Go Style Guide,
“<a href=https://github.com/uber-go/guide/blob/2023-05-09/style.md#reduce-scope-of-variables>Reduce the Scope of Variables</a>”
(2023)&#160;<a href=#fnref:9 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:10><p>Effective Go, “<a href=https://go.dev/doc/effective_go#control-structures>Control structures</a>”&#160;<a href=#fnref:10 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:11><p>Code Health,
“<a href=https://testing.googleblog.com/2017/06/code-health-reduce-nesting-reduce.html>Reduce Nesting, Reduce Complexity</a>”
(2023)&#160;<a href=#fnref:11 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:12><p>Ryland Goldstein,
“<a href=https://temporal.io/blog/go-shadowing-bad-choices#the-bug>How Go shadowing and bad choices caused our first data loss bug in years</a>”
(2021)&#160;<a href=#fnref:12 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/posts/errors-2/ aria-label="Previous - The Day the Linter Broke My Code" class="btn btn-primary"><span class=me-1>←</span>Previous</a></li><li><a href=/posts/scope-2/ aria-label="Next - Shadowing in Go" class="btn btn-primary">Next<span class=ms-1>→</span></a></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=/js/main.min.ca3c3bfb198dfe3921c0b3215b7a135c49ea5ecfb653d6a1ef7d96ed77cc898f.js integrity="sha256-yjw7+xmN/jkhwLMhW3oTXEnqXs+2U9ah732W7XfMiY8=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>